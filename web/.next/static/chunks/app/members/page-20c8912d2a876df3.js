(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[246],{3901:(e,t,r)=>{Promise.resolve().then(r.bind(r,1324))},1324:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var i=r(5155),s=r(7058),n=r(7401);let a=(0,n.A)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]),l=(0,n.A)("shield-check",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),o=(0,n.A)("shield-x",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m14.5 9.5-5 5",key:"17q4r4"}],["path",{d:"m9.5 9.5 5 5",key:"18nt4w"}]]),d=(0,n.A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);var c=r(2115),p=r(1616),x=r(9664);function h(){let[e,t]=(0,c.useState)([]),[r,n]=(0,c.useState)(!0),[h,m]=(0,c.useState)("");(0,c.useEffect)(()=>{u()},[]);let u=async()=>{try{n(!0);let e=(await (0,s.GG)((0,s.rJ)(x.db,"users"))).docs.map(e=>e.data());t(e)}catch(e){console.error("Error fetching members:",e)}finally{n(!1)}},y=async(e,r)=>{let i="Admin"===r?"GRANT admin access to":"REVOKE admin access from";if(confirm("Are you sure you want to ".concat(i," this user?")))try{await (0,s.mZ)((0,s.H9)(x.db,"users",e),{role:r}),t(t=>t.map(t=>t.uid===e?{...t,role:r}:t))}catch(e){alert("Failed to update role")}},g=async(e,r)=>{if(confirm("Are you sure you want to delete ".concat(r,"? This cannot be undone.")))try{await (0,s.kd)((0,s.H9)(x.db,"users",e)),t(t=>t.filter(t=>t.uid!==e))}catch(e){alert("Failed to delete user")}},f=e.filter(e=>{var t,r;return(null===(t=e.displayName)||void 0===t?void 0:t.toLowerCase().includes(h.toLowerCase()))||(null===(r=e.email)||void 0===r?void 0:r.toLowerCase().includes(h.toLowerCase()))});return(0,i.jsxs)(p.A,{children:[(0,i.jsxs)("div",{style:{marginBottom:"2.5rem",display:"flex",justifyContent:"space-between",alignItems:"flex-end"},children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{style:{fontSize:"2rem",fontWeight:"900",letterSpacing:"-0.5px"},children:"Member Directory"}),(0,i.jsx)("p",{style:{color:"var(--text-secondary)"},children:"Manage access levels and account status"})]}),(0,i.jsx)("div",{style:{position:"relative",width:"320px"},children:(0,i.jsx)("input",{type:"text",placeholder:"Search by name or email...",value:h,onChange:e=>m(e.target.value),style:{width:"100%",padding:"0.875rem 1rem",borderRadius:"0.75rem",border:"1px solid var(--border)",outline:"none",backgroundColor:"white",fontSize:"0.875rem",boxShadow:"0 1px 2px 0 rgba(0, 0, 0, 0.05)"}})})]}),(0,i.jsx)("div",{className:"card",style:{overflow:"hidden"},children:(0,i.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",textAlign:"left"},children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{style:{backgroundColor:"#F8FAFC",borderBottom:"1px solid var(--border)"},children:[(0,i.jsx)("th",{style:{padding:"1.25rem 1.5rem",fontSize:"0.75rem",fontWeight:"700",color:"var(--text-secondary)",textTransform:"uppercase"},children:"Member"}),(0,i.jsx)("th",{style:{padding:"1.25rem 1.5rem",fontSize:"0.75rem",fontWeight:"700",color:"var(--text-secondary)",textTransform:"uppercase"},children:"Current Role"}),(0,i.jsx)("th",{style:{padding:"1.25rem 1.5rem",fontSize:"0.75rem",fontWeight:"700",color:"var(--text-secondary)",textTransform:"uppercase"},children:"Status"}),(0,i.jsx)("th",{style:{padding:"1.25rem 1.5rem",fontSize:"0.75rem",fontWeight:"700",color:"var(--text-secondary)",textTransform:"uppercase"},children:"Access Control"})]})}),(0,i.jsx)("tbody",{children:r?(0,i.jsx)("tr",{children:(0,i.jsx)("td",{colSpan:4,style:{padding:"4rem",textAlign:"center",color:"var(--text-secondary)"},children:"Loading members..."})}):f.length>0?f.map(e=>{var t;return(0,i.jsxs)("tr",{style:{borderBottom:"1px solid var(--border)",transition:"background-color 0.2s"},children:[(0,i.jsx)("td",{style:{padding:"1.25rem 1.5rem"},children:(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[(0,i.jsx)("div",{style:{width:"44px",height:"44px",borderRadius:"12px",backgroundColor:"#F1F5F9",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--primary)",fontWeight:"800"},children:(null===(t=e.displayName)||void 0===t?void 0:t[0])||"U"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{style:{fontWeight:"700",fontSize:"0.925rem",color:"var(--text-primary)"},children:e.displayName}),(0,i.jsxs)("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",display:"flex",alignItems:"center",gap:"4px",marginTop:"2px"},children:[(0,i.jsx)(a,{size:12})," ",e.email]})]})]})}),(0,i.jsx)("td",{style:{padding:"1.25rem 1.5rem"},children:(0,i.jsx)("span",{style:{padding:"4px 12px",borderRadius:"99px",fontSize:"0.75rem",fontWeight:"800",backgroundColor:"Admin"===e.role?"#F57C0015":"#1E293B10",color:"Admin"===e.role?"#F57C00":"#1E293B"},children:"Admin"===e.role?"ADMIN":"MEMBER"})}),(0,i.jsx)("td",{style:{padding:"1.25rem 1.5rem"},children:(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[(0,i.jsx)("div",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:"Inactive"===e.status?"#EF4444":"#10B981"}}),(0,i.jsx)("span",{style:{fontSize:"0.875rem",fontWeight:"600",color:"var(--text-primary)"},children:e.status||"Active"})]})}),(0,i.jsx)("td",{style:{padding:"1.25rem 1.5rem"},children:(0,i.jsxs)("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:["Member"===e.role?(0,i.jsxs)("button",{onClick:()=>y(e.uid,"Admin"),style:{padding:"0.625rem 1rem",borderRadius:"0.75rem",color:"#059669",backgroundColor:"#DCFCE7",fontSize:"0.75rem",fontWeight:"800",display:"flex",alignItems:"center",gap:"6px",transition:"all 0.2s"},children:[(0,i.jsx)(l,{size:14})," Grant Admin Access"]}):(0,i.jsxs)("button",{onClick:()=>y(e.uid,"Member"),style:{padding:"0.625rem 1rem",borderRadius:"0.75rem",color:"#DC2626",backgroundColor:"#FEE2E2",fontSize:"0.75rem",fontWeight:"800",display:"flex",alignItems:"center",gap:"6px",transition:"all 0.2s"},children:[(0,i.jsx)(o,{size:14})," Revoke Admin Access"]}),(0,i.jsx)("button",{onClick:()=>g(e.uid,e.displayName),title:"Delete User Account",style:{padding:"8px",borderRadius:"10px",color:"#94A3B8",backgroundColor:"transparent",border:"1px solid #E2E8F0",transition:"all 0.2s"},children:(0,i.jsx)(d,{size:16})})]})})]},e.uid)}):(0,i.jsx)("tr",{children:(0,i.jsx)("td",{colSpan:4,style:{padding:"4rem",textAlign:"center",color:"var(--text-secondary)"},children:"No members found matching your search."})})})]})})]})}},1616:(e,t,r)=>{"use strict";r.d(t,{A:()=>g});var i=r(5155),s=r(6046),n=r(2115),a=r(9584),l=r(858),o=r(2823),d=r(2060),c=r(6967),p=r(3518),x=r(5236),h=r(8173),m=r.n(h),u=r(9664);function y(e){let{isMinimized:t,setIsMinimized:r}=e,n=(0,s.usePathname)(),a=[{name:"Dashboard",href:"/dashboard",icon:l.A},{name:"Members",href:"/members",icon:o.A},{name:"Transactions",href:"/transactions",icon:d.A}];return(0,i.jsxs)("div",{style:{width:t?"80px":"260px",height:"100vh",backgroundColor:"#1E293B",color:"white",transition:"width 0.3s ease",display:"flex",flexDirection:"column",position:"fixed",left:0,top:0,zIndex:50},children:[(0,i.jsxs)("div",{style:{height:"80px",padding:"0 24px",display:"flex",alignItems:"center",justifyContent:t?"center":"space-between"},children:[!t&&(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[(0,i.jsx)("div",{style:{width:"32px",height:"32px",backgroundColor:"#F57C00",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,i.jsx)(d.A,{size:20,color:"white"})}),(0,i.jsx)("h2",{style:{fontSize:"16px",fontWeight:"900",letterSpacing:"1px"},children:"KIKOBA"})]}),(0,i.jsx)("button",{onClick:()=>r(!t),style:{padding:"8px",borderRadius:"8px",backgroundColor:"rgba(255,255,255,0.05)",color:"#94A3B8"},children:t?(0,i.jsx)(c.A,{size:18}):(0,i.jsx)(p.A,{size:18})})]}),(0,i.jsx)("nav",{style:{flex:1,padding:"12px"},children:a.map(e=>{let r=n===e.href;return(0,i.jsxs)(m(),{href:e.href,style:{display:"flex",alignItems:"center",padding:"14px 16px",marginBottom:"8px",borderRadius:"12px",textDecoration:"none",color:r?"white":"#94A3B8",backgroundColor:r?"#F57C00":"transparent",justifyContent:t?"center":"flex-start",transition:"all 0.2s",boxShadow:r?"0 4px 12px rgba(245, 124, 0, 0.3)":"none"},children:[(0,i.jsx)(e.icon,{size:20,style:{marginRight:t?0:"12px"}}),!t&&(0,i.jsx)("span",{style:{fontWeight:"600",fontSize:"14px"},children:e.name})]},e.href)})}),(0,i.jsx)("div",{style:{padding:"12px",borderTop:"1px solid rgba(255,255,255,0.05)"},children:(0,i.jsxs)("button",{onClick:()=>{u.j.signOut()},style:{display:"flex",alignItems:"center",width:"100%",padding:"14px 16px",borderRadius:"12px",color:"#F43F5E",justifyContent:t?"center":"flex-start",transition:"all 0.2s"},children:[(0,i.jsx)(x.A,{size:20,style:{marginRight:t?0:"12px"}}),!t&&(0,i.jsx)("span",{style:{fontWeight:"600",fontSize:"14px"},children:"Logout"})]})})]})}function g(e){let{children:t}=e,{user:r,role:l,loading:o}=(0,a.A)(),d=(0,s.useRouter)(),[c,p]=(0,n.useState)(!1);return((0,n.useEffect)(()=>{o||r&&"Admin"===l||d.replace("/")},[r,l,o,d]),o||!r||"Admin"!==l)?(0,i.jsx)("div",{style:{height:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,i.jsx)("p",{children:"Loading Admin Dashboard..."})}):(0,i.jsxs)("div",{style:{display:"flex"},children:[(0,i.jsx)(y,{isMinimized:c,setIsMinimized:p}),(0,i.jsx)("main",{style:{flex:1,marginLeft:c?"80px":"260px",minHeight:"100vh",backgroundColor:"var(--background-muted)",transition:"margin-left 0.3s ease"},children:(0,i.jsx)("div",{style:{padding:"2.5rem"},children:t})})]})}},9584:(e,t,r)=>{"use strict";r.d(t,{A:()=>c,AuthProvider:()=>d});var i=r(5155),s=r(12),n=r(7058),a=r(2115),l=r(9664);let o=(0,a.createContext)({user:null,role:null,loading:!0});function d(e){let{children:t}=e,[r,d]=(0,a.useState)(null),[c,p]=(0,a.useState)(null),[x,h]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{let e=(0,s.hg)(l.j,async e=>{if(e){h(!0),d(e);try{let t=await (0,n.x7)((0,n.H9)(l.db,"users",e.uid));t.exists()&&p(t.data().role||"Member")}catch(e){console.error("Error fetching user role:",e)}h(!1)}else d(null),p(null),h(!1)});return()=>e()},[]),(0,i.jsx)(o.Provider,{value:{user:r,role:c,loading:x},children:t})}let c=()=>(0,a.useContext)(o)},9664:(e,t,r)=>{"use strict";r.d(t,{db:()=>o,j:()=>l});var i=r(9904),s=r(12),n=r(7058);let a=(0,i.Dk)().length>0?(0,i.Sx)():(0,i.Wp)({apiKey:"AIzaSyBWBs-DPjFFpVjm_Kcna5PE5Jf_L7DofH8",authDomain:"kikoba-app-28064.firebaseapp.com",projectId:"kikoba-app-28064",storageBucket:"kikoba-app-28064.firebasestorage.app",messagingSenderId:"496818688394",appId:"1:496818688394:web:61b33f4aede1cf3a9cb873"}),l=(0,s.xI)(a),o=(0,n.aU)(a)}},e=>{var t=t=>e(e.s=t);e.O(0,[135,497,963,330,441,517,358],()=>t(3901)),_N_E=e.O()}]);