module.exports=[56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},51108,(a,b,c)=>{"use strict";b.exports=a.r(40881).vendored.contexts.AppRouterContext},52491,(a,b,c)=>{"use strict";b.exports=a.r(40881).vendored.contexts.HooksClientContext},60703,(a,b,c)=>{"use strict";b.exports=a.r(40881).vendored.contexts.ServerInsertedHtml},49231,(a,b,c)=>{"use strict";b.exports=a.r(40881).vendored["react-ssr"].ReactServerDOMTurbopackClient},36555,a=>{"use strict";var b=a.i(56856);a.i(5673);var c=a.i(90179),d=a.i(35520);let e=(0,d.default)("arrow-down-left",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]]),f=(0,d.default)("arrow-up-right",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]),g=(0,d.default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),h=(0,d.default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),i=(0,d.default)("user-search",[["circle",{cx:"10",cy:"7",r:"4",key:"e45bow"}],["path",{d:"M10.3 15H7a4 4 0 0 0-4 4v2",key:"3bnktk"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["path",{d:"m21 21-1.9-1.9",key:"1g2n9r"}]]);var j=a.i(55132),k=a.i(89490),l=a.i(39168);function m(){let[a,d]=(0,j.useState)([]),[m,n]=(0,j.useState)(null),[o,p]=(0,j.useState)("Contribution"),[q,r]=(0,j.useState)("Hisa"),[s,t]=(0,j.useState)(""),[u,v]=(0,j.useState)(!1),[w,x]=(0,j.useState)(!1),[y,z]=(0,j.useState)(""),[A,B]=(0,j.useState)(0);(0,j.useEffect)(()=>{C()},[]),(0,j.useEffect)(()=>{m&&D(m.uid)},[m]);let C=async()=>{try{v(!0);let a=(await (0,c.getDocs)((0,c.collection)(l.db,"users"))).docs.map(a=>a.data());d(a)}catch(a){console.error("Error fetching members:",a)}finally{v(!1)}},D=async a=>{try{let b=(0,c.query)((0,c.collection)(l.db,"transactions"),(0,c.where)("memberId","==",a)),d=await (0,c.getDocs)(b),e=0;d.forEach(a=>{let b=a.data();"Loan"===b.type&&(e+=b.amount),"Loan Repayment"===b.type&&(e-=b.amount)}),B(e),e<=0&&"Loan Repayment"===o&&p("Contribution")}catch(a){console.error(a)}},E=async a=>{if(a.preventDefault(),!m||!s)return void alert("Please select a member and enter amount");x(!0);try{await (0,c.addDoc)((0,c.collection)(l.db,"transactions"),{memberId:m.uid,memberName:m.displayName,amount:parseFloat(s),type:o,category:"Loan Repayment"!==o?q:void 0,interestRate:10*("Loan"===o&&"Standard"===q),date:new Date().toISOString()}),alert("Transaction recorded successfully!"),t(""),n(null),z("")}catch(a){alert("Failed to record transaction")}finally{x(!1)}},F=a.filter(a=>a.displayName?.toLowerCase().includes(y.toLowerCase()));return(0,b.jsxs)(k.default,{children:[(0,b.jsxs)("div",{style:{marginBottom:"2.5rem"},children:[(0,b.jsx)("h1",{style:{fontSize:"2rem",fontWeight:"900",letterSpacing:"-0.5px"},children:"New Transaction"}),(0,b.jsx)("p",{style:{color:"var(--text-secondary)"},children:"Record financial activities for society members"})]}),(0,b.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"2.5rem",alignItems:"start"},children:[(0,b.jsx)("div",{className:"card",style:{padding:"2.5rem"},children:(0,b.jsxs)("form",{onSubmit:E,style:{display:"flex",flexDirection:"column",gap:"2rem"},children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{style:{fontSize:"0.875rem",fontWeight:"800",color:"var(--text-secondary)",display:"block",marginBottom:"1rem"},children:"TRANSACTION TYPE"}),(0,b.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem"},children:[{id:"Contribution",icon:e,label:"Deposit",color:"#10B981"},{id:"Loan",icon:f,label:"Loan",color:"#EF4444"},{id:"Loan Repayment",icon:h,label:"Repay",color:"#F57C00"}].map(a=>(0,b.jsxs)("button",{type:"button",disabled:"Loan Repayment"===a.id&&A<=0,onClick:()=>{p(a.id),"Contribution"===a.id&&r("Hisa"),"Loan"===a.id&&r("Standard")},style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"8px",padding:"1rem",borderRadius:"1rem",border:"2px solid",borderColor:o===a.id?a.color:"var(--border)",backgroundColor:o===a.id?`${a.color}08`:"white",opacity:"Loan Repayment"===a.id&&A<=0?.3:1,cursor:"Loan Repayment"===a.id&&A<=0?"not-allowed":"pointer",transition:"all 0.2s"},children:[(0,b.jsx)(a.icon,{size:24,color:o===a.id?a.color:"#94A3B8"}),(0,b.jsx)("span",{style:{fontSize:"0.75rem",fontWeight:"800",color:o===a.id?a.color:"#94A3B8"},children:a.label})]},a.id))}),"Loan Repayment"!==o&&(0,b.jsx)("div",{style:{marginTop:"1.5rem",display:"flex",gap:"1rem"},children:"Contribution"===o?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("button",{type:"button",onClick:()=>r("Hisa"),style:{flex:1,padding:"0.75rem",borderRadius:"0.75rem",fontWeight:"700",fontSize:"0.875rem",backgroundColor:"Hisa"===q?"#10B981":"#F1F5F9",color:"Hisa"===q?"white":"#64748B",border:"none",cursor:"pointer",transition:"all 0.2s"},children:"Hisa (Shares)"}),(0,b.jsx)("button",{type:"button",onClick:()=>r("Jamii"),style:{flex:1,padding:"0.75rem",borderRadius:"0.75rem",fontWeight:"700",fontSize:"0.875rem",backgroundColor:"Jamii"===q?"#10B981":"#F1F5F9",color:"Jamii"===q?"white":"#64748B",border:"none",cursor:"pointer",transition:"all 0.2s"},children:"Jamii"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("button",{type:"button",onClick:()=>r("Standard"),style:{flex:1,padding:"0.75rem",borderRadius:"0.75rem",fontWeight:"700",fontSize:"0.875rem",backgroundColor:"Standard"===q?"#EF4444":"#F1F5F9",color:"Standard"===q?"white":"#64748B",border:"none",cursor:"pointer",transition:"all 0.2s"},children:"Standard (10% Interest)"}),(0,b.jsx)("button",{type:"button",onClick:()=>r("Dharura"),style:{flex:1,padding:"0.75rem",borderRadius:"0.75rem",fontWeight:"700",fontSize:"0.875rem",backgroundColor:"Dharura"===q?"#EF4444":"#F1F5F9",color:"Dharura"===q?"white":"#64748B",border:"none",cursor:"pointer",transition:"all 0.2s"},children:"Dharura (No Interest)"})]})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{style:{fontSize:"0.875rem",fontWeight:"800",color:"var(--text-secondary)",display:"block",marginBottom:"1rem"},children:"SELECT MEMBER"}),(0,b.jsx)("div",{style:{padding:"1rem",borderRadius:"1rem",border:"1px solid var(--border)",display:"flex",alignItems:"center",gap:"12px",backgroundColor:m?"#F0F9FF":"var(--background-muted)"},children:m?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{style:{width:"32px",height:"32px",borderRadius:"8px",backgroundColor:"#0EA5E9",display:"flex",alignItems:"center",justifyContent:"center",color:"white"},children:m.displayName[0]}),(0,b.jsxs)("div",{style:{flex:1},children:[(0,b.jsx)("p",{style:{fontWeight:"700",fontSize:"0.875rem"},children:m.displayName}),A>0&&(0,b.jsxs)("p",{style:{fontSize:"0.7rem",color:"#0EA5E9"},children:["Debt: TSh ",A.toLocaleString()]})]}),(0,b.jsx)("button",{onClick:()=>n(null),style:{color:"var(--text-secondary)"},children:"Change"})]}):(0,b.jsxs)("p",{style:{color:"var(--text-secondary)",fontSize:"0.875rem",display:"flex",alignItems:"center",gap:"8px"},children:[(0,b.jsx)(i,{size:18})," Search and select from the list"]})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{style:{fontSize:"0.875rem",fontWeight:"800",color:"var(--text-secondary)",display:"block",marginBottom:"1rem"},children:"AMOUNT (TSH)"}),(0,b.jsx)("input",{type:"number",value:s,onChange:a=>t(a.target.value),placeholder:"e.g. 50000",style:{width:"100%",padding:"1rem",borderRadius:"1rem",border:"1px solid var(--border)",fontSize:"1.25rem",fontWeight:"800",textAlign:"center",outline:"none",color:"var(--text-primary)"}})]}),(0,b.jsx)("button",{type:"submit",className:"btn-primary",disabled:w||!m,style:{padding:"1.25rem",fontSize:"1rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px"},children:w?"Processing...":(0,b.jsxs)(b.Fragment,{children:["Record Transaction ",(0,b.jsx)(g,{size:20})]})})]})}),(0,b.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[(0,b.jsx)("div",{style:{position:"relative"},children:(0,b.jsx)("input",{type:"text",placeholder:"Search member...",value:y,onChange:a=>z(a.target.value),style:{width:"100%",padding:"1rem",borderRadius:"1rem",border:"1px solid var(--border)",outline:"none",backgroundColor:"white"}})}),(0,b.jsx)("div",{className:"card",style:{overflow:"hidden",maxHeight:"500px",overflowY:"auto"},children:F.map(a=>(0,b.jsxs)("button",{onClick:()=>n(a),style:{width:"100%",display:"flex",alignItems:"center",gap:"1rem",padding:"1rem 1.5rem",borderBottom:"1px solid var(--border)",backgroundColor:m?.uid===a.uid?"#F0F9FF":"white",textAlign:"left"},children:[(0,b.jsx)("div",{style:{width:"36px",height:"36px",borderRadius:"10px",backgroundColor:"var(--background-muted)",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--primary)",fontWeight:"800"},children:a.displayName[0]}),(0,b.jsx)("span",{style:{fontWeight:"700",fontSize:"0.9rem"},children:a.displayName})]},a.uid))})]})]})]})}a.s(["default",()=>m],36555)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__64a3063c._.js.map