{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/Maono_App/web/app/reminders/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useRouter } from 'next/navigation';\r\nimport { useState } from 'react';\r\nimport AppLayout from '../components/AppLayout';\r\n\r\nexport default function RemindersPage() {\r\n    const router = useRouter();\r\n    const [loading, setLoading] = useState(false);\r\n    const [message, setMessage] = useState<{ type: 'success' | 'error'; text: string } | null>(null);\r\n\r\n    const handleContributionReminder = async () => {\r\n        if (!window.confirm('Send contribution reminder to all members? This will send one email to all members with their addresses in BCC.')) {\r\n            return;\r\n        }\r\n\r\n        setLoading(true);\r\n        setMessage(null);\r\n\r\n        try {\r\n            const token = localStorage.getItem('firebaseToken');\r\n            if (!token) {\r\n                throw new Error('Authentication token not found. Please refresh the page.');\r\n            }\r\n\r\n            const response = await fetch('/api/email/send-contribution-reminders', {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'Authorization': `Bearer ${token}`,\r\n                },\r\n            });\r\n\r\n            const data = await response.json();\r\n\r\n            if (!response.ok) {\r\n                throw new Error(data.error || 'Failed to send reminders');\r\n            }\r\n\r\n            setMessage({\r\n                type: 'success',\r\n                text: `‚úÖ Contribution reminder sent to ${data.recipientCount} members`,\r\n            });\r\n        } catch (error: any) {\r\n            setMessage({\r\n                type: 'error',\r\n                text: `‚ùå Error: ${error.message || 'Failed to send reminders'}`,\r\n            });\r\n            console.error(error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleLoanReminder = async () => {\r\n        if (!window.confirm('Send loan repayment reminders? This will send individual emails to members with outstanding loans.')) {\r\n            return;\r\n        }\r\n\r\n        setLoading(true);\r\n        setMessage(null);\r\n\r\n        try {\r\n            const token = localStorage.getItem('firebaseToken');\r\n            if (!token) {\r\n                throw new Error('Authentication token not found. Please refresh the page.');\r\n            }\r\n\r\n            const response = await fetch('/api/email/send-loan-reminders', {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'Authorization': `Bearer ${token}`,\r\n                },\r\n            });\r\n\r\n            const data = await response.json();\r\n\r\n            if (!response.ok) {\r\n                throw new Error(data.error || 'Failed to send reminders');\r\n            }\r\n\r\n            setMessage({\r\n                type: 'success',\r\n                text: `‚úÖ Loan reminders sent to ${data.successCount}/${data.recipientCount} members with outstanding loans`,\r\n            });\r\n        } catch (error: any) {\r\n            setMessage({\r\n                type: 'error',\r\n                text: `‚ùå Error: ${error.message || 'Failed to send reminders'}`,\r\n            });\r\n            console.error(error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <AppLayout>\r\n            <div className=\"min-h-screen bg-gray-50\">\r\n                {/* Header */}\r\n                <div className=\"bg-white shadow\">\r\n                    <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\r\n                        <h1 className=\"text-3xl font-bold text-gray-900\">Send Reminders</h1>\r\n                        <p className=\"mt-2 text-gray-600\">Manage email notifications for members and admins</p>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Messages */}\r\n                {message && (\r\n                    <div className={`max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mt-6 p-4 rounded-lg ${\r\n                        message.type === 'success' ? 'bg-green-50 border border-green-200' : 'bg-red-50 border border-red-200'\r\n                    }`}>\r\n                        <p className={message.type === 'success' ? 'text-green-800' : 'text-red-800'}>\r\n                            {message.text}\r\n                        </p>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Content */}\r\n                <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8\">\r\n                        {/* Contribution Reminder Card */}\r\n                        <div className=\"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow\">\r\n                            <div className=\"flex items-start justify-between mb-4\">\r\n                                <div>\r\n                                    <h2 className=\"text-xl font-bold text-gray-900\">Contribution Reminder</h2>\r\n                                    <p className=\"text-sm text-gray-600 mt-1\">\r\n                                        Remind all members to contribute their monthly savings\r\n                                    </p>\r\n                                </div>\r\n                                <div className=\"bg-green-100 p-3 rounded-lg\">\r\n                                    <svg className=\"w-6 h-6 text-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n                                    </svg>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"bg-gray-50 p-4 rounded-lg mb-6\">\r\n                                <h3 className=\"font-semibold text-gray-800 mb-2\">Email Details:</h3>\r\n                                <ul className=\"text-sm text-gray-600 space-y-1\">\r\n                                    <li>‚úì Sent to: All active members</li>\r\n                                    <li>‚úì Method: Single email with BCC (privacy-preserving)</li>\r\n                                    <li>‚úì Content: HISA (30,000) & JAMII (5,000) contributions</li>\r\n                                    <li>‚úì Frequency: One-time send</li>\r\n                                </ul>\r\n                            </div>\r\n\r\n                            <button\r\n                                onClick={handleContributionReminder}\r\n                                disabled={loading}\r\n                                className=\"w-full bg-green-600 hover:bg-green-700 disabled:bg-gray-400 text-white font-semibold py-2 px-4 rounded-lg transition-colors\"\r\n                            >\r\n                                {loading ? 'Sending...' : 'Send Contribution Reminder'}\r\n                            </button>\r\n                        </div>\r\n\r\n                        {/* Loan Repayment Reminder Card */}\r\n                        <div className=\"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow\">\r\n                            <div className=\"flex items-start justify-between mb-4\">\r\n                                <div>\r\n                                    <h2 className=\"text-xl font-bold text-gray-900\">Loan Repayment Reminder</h2>\r\n                                    <p className=\"text-sm text-gray-600 mt-1\">\r\n                                        Remind members with outstanding loans to make repayments\r\n                                    </p>\r\n                                </div>\r\n                                <div className=\"bg-red-100 p-3 rounded-lg\">\r\n                                    <svg className=\"w-6 h-6 text-red-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 9v2m0 4v2m0 4v2m-6-4a2 2 0 11-4 0 2 2 0 014 0zM7 20a7 7 0 1114 0M17 12a5 5 0 11-10 0 5 5 0 0110 0z\" />\r\n                                    </svg>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"bg-gray-50 p-4 rounded-lg mb-6\">\r\n                                <h3 className=\"font-semibold text-gray-800 mb-2\">Email Details:</h3>\r\n                                <ul className=\"text-sm text-gray-600 space-y-1\">\r\n                                    <li>‚úì Sent to: Members with outstanding loans</li>\r\n                                    <li>‚úì Method: Individual personalized emails</li>\r\n                                    <li>‚úì Content: Standard & Dharura loan balances</li>\r\n                                    <li>‚úì Frequency: One-time send</li>\r\n                                </ul>\r\n                            </div>\r\n\r\n                            <button\r\n                                onClick={handleLoanReminder}\r\n                                disabled={loading}\r\n                                className=\"w-full bg-red-600 hover:bg-red-700 disabled:bg-gray-400 text-white font-semibold py-2 px-4 rounded-lg transition-colors\"\r\n                            >\r\n                                {loading ? 'Sending...' : 'Send Loan Reminder'}\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Information Section */}\r\n                    <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-6 mt-8\">\r\n                        <h3 className=\"text-lg font-semibold text-blue-900 mb-3\">üìß How Email Reminders Work</h3>\r\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 text-sm text-blue-800\">\r\n                            <div>\r\n                                <h4 className=\"font-semibold mb-2\">Contribution Reminder</h4>\r\n                                <ul className=\"space-y-1 text-blue-700\">\r\n                                    <li>‚Ä¢ Sends to all active members</li>\r\n                                    <li>‚Ä¢ Uses BCC for privacy (members can't see others)</li>\r\n                                    <li>‚Ä¢ Single batch email to all</li>\r\n                                    <li>‚Ä¢ Mentions both HISA and JAMII amounts</li>\r\n                                </ul>\r\n                            </div>\r\n                            <div>\r\n                                <h4 className=\"font-semibold mb-2\">Loan Reminder</h4>\r\n                                <ul className=\"space-y-1 text-blue-700\">\r\n                                    <li>‚Ä¢ Sends only to members with outstanding loans</li>\r\n                                    <li>‚Ä¢ Individual personalized emails</li>\r\n                                    <li>‚Ä¢ Includes current loan balance for each loan</li>\r\n                                    <li>‚Ä¢ Shows both Standard & Dharura loans if applicable</li>\r\n                                </ul>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </AppLayout>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 592, "column": 0}, "map": {"version":3,"sources":["file:///D:/Maono_App/web/node_modules/next/navigation.js"],"sourcesContent":["module.exports = require('./dist/client/components/navigation')\n"],"names":[],"mappings":"AAAA,OAAO,OAAO","ignoreList":[0]}}]
}